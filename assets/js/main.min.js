$(document).ready(function () {
  navItem = document.querySelectorAll(".nav-container li");

  navItem.forEach((item) => {
    item.addEventListener("click", () => {
      //active nav
      currentActiveNav = document.querySelector(".active-nav");
      if (currentActiveNav) {
        currentActiveNav.classList.remove("active-nav");
      }
      item.classList.add("active-nav");

      //ChangePage
      targetPageName = item.getAttribute("targetPage");
      //check trung page ko
      if (item != currentActiveNav) {
        changePage(targetPageName);
      }
    });
  });

  pageLoading = document.querySelector(".page-loading");
  btnBack = document.querySelector(".back-to-home");

  changePage = (targetPageName) => {
    currentActivePage = document.querySelector(".active-page");
    if (currentActivePage) {
      currentActivePage.classList.remove("active-page");
    }
    pageLoading.classList.remove("d-none");
    targetPage = document.querySelector(`.${targetPageName}`);
    targetPage.classList.add("active-page");
    reloadSwiper();

    if (targetPageName == "page-1") {
      btnBack.classList.remove("show-btn");
    } else {
      btnBack.classList.add("show-btn");
    }
    setTimeout(() => {
      window.scrollTo({
        top: 0,
      });
      pageLoading.classList.add("d-none");
      targetPage.classList.add("fade-in");

      //show >< hide button backtohome
    }, 700);
  };

  reloadSwiper = () => {
    swiper1.update();
    swiper2.update();
    swiper3.update();
  };

  // Back to home

  btnBack.addEventListener("click", () => {
    changePage("page-1");
  });

  var swiper1 = new Swiper(".swiper-1", {
    slidesPerView: 3,
    spaceBetween: 15,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });
  var swiper3 = new Swiper(".swiper-3", {
    slidesPerView: 1,
    spaceBetween: 15,
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
  });

  var swiper2 = new Swiper(".swiper-2", {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: "auto",
    loop: true,
    speed: 1000,
    spaceBetween: 0,
    coverflowEffect: {
      rotate: -30,
      stretch: 0,
      depth: 0,
      modifier: 1,
      slideShadows: true,
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    on: {
      slideChange: function () {
        setTimeout(() => {
          document.querySelector(".swiper-2 .swiper-slide-next").classList.add("my-next");
          console.log(document.querySelector(".swiper-2 .swiper-slide-next"));
        }, 100);
      },
    },
  });
});

// write function convert string to number

// write function change background when click on button has id = "haha"
